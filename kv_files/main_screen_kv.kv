Screen:

    MDToolbar:

        id: toolbar
        title: "SecureMemo"
        pos_hint: {"top": 1}
        left_action_items:[["menu", lambda x: nav_drawer.set_state("open")]]
        
    MDNavigationLayout:

        ScreenManager:
            id: screen_manager

            Screen:

                name: "scr 1"

                MDLabel:

                    text: ""
                    halign: "center"

                ScrollView:

                    id: scrol
                    size_hint: 1,.9
                    pos_hint: {"top":.9}

                    MDBoxLayout:

                        id: box
                        orientation: 'vertical'
                        spacing: 18
                        padding: [10,18,10,10]
                        size_hint_y: None
                        height: self.minimum_height
                        row_default_height: '100dp'
                        row_force_default: True

                MDBottomAppBar:

                    MDToolbar:

                        title: ""
                        icon: "calendar-plus"
                        type: "bottom"
                        mode: "end"
                        left_action_items: [["format-color-fill", lambda x: app.show_theme_picker()]]
                        on_action_button:app.open_popup() 

                TooltipMDIconButton:

                    id: buttonn
                    icon: "inbox-arrow-down"
                    tooltip_text: "Completed tasks list"
                    pos_hint: {"x": .88, "y": .91}
                    elevation: 18
                    on_release: app.menu.open()

                TooltipMDIconButton:

                    id: deletee
                    icon: "delete-forever"
                    tooltip_text: "Delete All tasks"
                    pos_hint: {"x": .93, "y": .91}
                    elevation: 18
                    on_release: app.delete_all()

            Screen:
                name: "unhide_scr"
    
                MDCard:
                    size_hint: None, None
                    size: 300, 300
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    elevation: 10
                    padding: 25
                    spacing: 25
                    orientation: 'vertical'

                    MDLabel:
                        id: welcome_label
                        text: "Enter your password"
                        font_size: 25
                        halign: 'center'
                        size_hint_y: None
                        height: self.texture_size[1]
                        padding_y: 15

                    MDTextFieldRound:
                        id: password
                        hint_text: "password"
                        size_hint_x: None
                        width: 200
                        font_size: 18
                        pos_hint: {"center_x": 0.5}
                        password: True

                    BoxLayout:
                        orientation: "horizontal"
                        spacing: 10  # Khoảng cách giữa các widget

                        MDRoundFlatButton:
                            text: "ENTER"
                            font_size: 12
                            on_press: app.unhide()
                            size_hint_x: 0.6  

                        MDRoundFlatButton:      #Here
                            on_press: app.change_to_face_recog() 
                            size_hint_x: 0.4  
                            md_bg_color: 1, 1, 1, 0  # Màu nền là màu trong suốt
                            line_color: 0, 0, 0, 0  # Màu viền là màu trong suốt
                            Image:
                                source: "image_files\\set_face.png"
                                #pos_hint: {"center_x": 0.5, "center_y": 0.5}
                            


                    Widget:
                        size_hint_y: None
                        height: 10

            Screen:
                name: "pass_set"
    
                MDCard:
                    size_hint: None, None
                    size: 300, 350
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    elevation: 10
                    padding: 25
                    spacing: 25
                    orientation: 'vertical'

                    MDLabel:
                        id: welcome_label1
                        text: "Set Password"
                        font_size: 25
                        halign: 'center'
                        size_hint_y: None
                        height: self.texture_size[1]
                        padding_y: 15

                    MDTextFieldRound:
                        id: pass_confirm
                        hint_text: "Password"
                        size_hint_x: None
                        width: 200
                        font_size: 18
                        pos_hint: {"center_x": 0.5}
                        password: True

                    MDTextFieldRound:
                        id: pass_confirm2
                        hint_text: "Confirm Password"
                        size_hint_x: None
                        width: 200
                        font_size: 18
                        pos_hint: {"center_x": 0.5}
                        password: True

                    MDRoundFlatButton:
                        text: "SAVE"
                        font_size: 12
                        pos_hint: {"center_x": 0.5}
                        on_press: app.save_pass()          

                    Widget:
                        size_hint_y: None
                        height: 10


            Screen:

                name: "change_pass"
    
                MDCard:
                    size_hint: None, None
                    size: 300, 250
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    elevation: 10
                    padding: 25
                    spacing: 25
                    orientation: 'vertical'

                    MDLabel:
                        id: welcome_label2
                        text: "Enter current Password"
                        font_size: 20
                        halign: 'center'
                        size_hint_y: None
                        height: self.texture_size[1]
                        padding_y: 15

                    MDTextFieldRound:
                        id: pass_change
                        hint_text: "Password"
                        size_hint_x: None
                        width: 200
                        font_size: 16
                        pos_hint: {"center_x": 0.5}
                        password: True

                    MDRoundFlatButton:
                        text: "ENTER"
                        font_size: 12
                        pos_hint: {"center_x": 0.5}
                        on_press: app.check_file_pass()          

                    Widget:
                        size_hint_y: None
                        height: 10


            Screen:

                name: "remove_pass"
    
                MDCard:
                    size_hint: None, None
                    size: 300, 250
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    elevation: 10
                    padding: 25
                    spacing: 25
                    orientation: 'vertical'

                    MDLabel:
                        id: warning_label1
                        text: "If there is already facial data, it will be removed!"
                        font_size: 20
                        halign: 'center'
                        size_hint_y: None
                        height: self.texture_size[1]
                        padding_y: 15
                        bold: True

                    MDLabel:
                        id: welcome_label3
                        text: "Enter current Password"
                        font_size: 20
                        halign: 'center'
                        size_hint_y: None
                        height: self.texture_size[1]
                        padding_y: 15

                    MDTextFieldRound:
                        id: rmv_pass
                        hint_text: "Password"
                        size_hint_x: None
                        width: 200
                        font_size: 16
                        pos_hint: {"center_x": 0.5}
                        password: True

                    MDRoundFlatButton:
                        text: "ENTER"
                        font_size: 12
                        pos_hint: {"center_x": 0.5}
                        on_press: app.remove_file_pass()          

                    Widget:
                        size_hint_y: None
                        height: 10

            Screen:

                name: "remove_face"
    
                MDCard:
                    size_hint: None, None
                    size: 300, 250
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    elevation: 10
                    padding: 25
                    spacing: 25
                    orientation: 'vertical'

                    MDLabel:
                        id: warning_label1
                        text: "This will remove your facial data!"
                        font_size: 20
                        halign: 'center'
                        size_hint_y: None
                        height: self.texture_size[1]
                        padding_y: 15
                        bold: True
                        
                    MDLabel:
                        id: welcome_label4
                        text: "Enter your current password"
                        font_size: 20
                        halign: 'center'
                        size_hint_y: None
                        height: self.texture_size[1]
                        padding_y: 15

                    MDTextFieldRound:
                        id: rmv_face_pass
                        hint_text: "Password"
                        size_hint_x: None
                        width: 200
                        font_size: 16
                        pos_hint: {"center_x": 0.5}
                        password: True

                    MDRoundFlatButton:
                        text: "ENTER"
                        font_size: 12
                        pos_hint: {"center_x": 0.5}
                        on_press: app.remove_face_folder()          

                    Widget:
                        size_hint_y: None
                        height: 10

            Screen:

                name: "change_face"
    
                MDCard:
                    size_hint: None, None
                    size: 300, 250
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}
                    elevation: 10
                    padding: 25
                    spacing: 25
                    orientation: 'vertical'

                    MDLabel:
                        id: warning_label
                        text: "Your existing facial data will be cleared!"
                        font_size: 20
                        halign: 'center'
                        size_hint_y: None
                        height: self.texture_size[1]
                        padding_y: 15

                    MDLabel:
                        id: welcome_label4
                        text: "Enter your current password"
                        font_size: 20
                        halign: 'center'
                        size_hint_y: None
                        height: self.texture_size[1]
                        padding_y: 15

                    MDTextFieldRound:
                        id: change_face_pass
                        hint_text: "Password"
                        size_hint_x: None
                        width: 200
                        font_size: 16
                        pos_hint: {"center_x": 0.5}
                        password: True

                    MDRoundFlatButton:
                        text: "ENTER"
                        font_size: 12
                        pos_hint: {"center_x": 0.5}
                        on_press: app.change_face()          

                    Widget:
                        size_hint_y: None
                        height: 10

            Screen:

                name: "scr 2"

                MDLabel:

                    text: ""
                    pos_hint: {"center_x":0.6, "center_y":0.85}

                ScrollView:

                    id: scroll
                    size_hint: 1,.9
                    pos_hint: {"top":.9}

                    MDBoxLayout:

                        id: box2
                        orientation: 'vertical'
                        spacing: 18
                        padding: [10,18,10,10]
                        size_hint_y: None
                        height: self.minimum_height
                        row_default_height: '100dp'
                        row_force_default: True

                MDFloatingActionButton:

                    id: adder
                    pos_hint: {"top":.16, "right":.97}
                    icon: 'plus'
                    on_release:app.opennotes()

            Screen:
                name: "getface"
                
                MDBoxLayout:
                    padding: 10
                    orientation: 'horizontal'
                    halign: 'center'
                    adaptive_height: True
                    MDRaisedButton:
                        id: start_button
                        text: 'Continue Capture'
                        on_release: app.start_continuous_capture()
                    MDLabel:
                        id: capture_label
                        text: 'Press "Start Capture" to begin capturing.'
                        font_style: 'Body1'
                        halign: 'center'
                        adaptive_height: True

                MyCamera:
                    id: camera
                    resolution: (1280, 960)
                    play: True
                    keep_ratio: True
                    allow_stretch: True
                    adaptive_width: True

                            
            Screen:
                name: "face_verification"

                MDBoxLayout:
                    orientation: 'horizontal'
                    padding: [350,10,10,10]
                    spacing: 10

                    MDRaisedButton:
                        text: 'Re-Verificate'
                        on_press: app.start_continuous_verification()

                    MDRaisedButton:
                        text: 'Back to Home'
                        on_press: app.root.ids.screen_manager.current = "scr 1"

                MyCamera:
                    id: face_camera
                    resolution: (1280, 960)
                    play: True
                    allow_stretch: True
                    keep_ratio: True

            Screen:
                
                name: "settings"

                MDBoxLayout:

                    size_hint: 1,.9
                    pos_hint: {"y":.09}
                    orientation: 'vertical'

                    TwoLineAvatarListItem:

                        text: 'Set password for notes'
                        secondary_text: "Password protection is only available for notes!"
                        on_release: app.set_pass()
                        ImageLeftWidget:
                            source: "image_files\\lock.png"

                    ThreeLineAvatarListItem:

                        text: 'Set face authentication for notes'
                        secondary_text: "Face authentication is only available for notes!"
                        tertiary_text: "Facial recognition can be used instead of passwords for login."
                        on_release: app.get_facial_data()
                        ImageLeftWidget:
                            source: "image_files\\set_face.png"

                    TwoLineAvatarListItem:

                        text: 'Delete password'
                        secondary_text: "Password protection will be removed from your notes!"
                        on_release: app.remove_pass()
                        ImageLeftWidget:
                            source: "image_files\\del.png"

                    TwoLineAvatarListItem:

                        text: 'Delete facial database'
                        secondary_text: "Face authentication will be removed from your notes!"
                        on_release: app.remove_facial_data()
                        ImageLeftWidget:
                            source: "image_files\\delete_face.png"

                    ThreeLineAvatarListItem:

                        text: 'Delete all completed task list'
                        secondary_text: "This will delete list of all the completed tasks"
                        tertiary_text: "Changes will be displayed after app restarts"
                        on_release: app.delete_finished()
                        ImageLeftWidget:
                            source: "image_files\\delete.jpg"

                    ThreeLineAvatarListItem:

                        text: 'Set day/night automatic theme on or off'
                        secondary_text: "When it's 7pm IST or more theme will automatically change to dark if this setting is on"
                        tertiary_text: "Changes will be made after app restarts"
                        on_release: app.theme()
                        ImageLeftWidget:
                            source: "image_files\\theme.png"
                        
        MDNavigationDrawer:

            id: nav_drawer

            MDBoxLayout:

                orientation: "vertical"
                pos_hint: {"center_x":.5, "y":.47}
                size: "300dp", "300dp"
                adaptive_height: True

                Image:

                    pos_hint: {'top':1}
                    source: 'image_files\\image.jpg'
                    

                MDBoxLayout:
                    pos_hint: {"top": 1}
                    MDList:

                        padding: "8dp"
                        spacing: "8dp"
                        pos_hint: {"top": 1}

                        OneLineIconListItem:

                            text: "Tasks"
                            on_press:
                                root.ids.nav_drawer.set_state("close")
                                root.ids.screen_manager.current = "scr 1"
                            IconLeftWidget:
                                icon: 'image_files\\task.png'
                                user_font_size : '12sp'
                                pos_hint: {'center_x': 1, 'center_y':.54}

                        OneLineIconListItem:

                            text: "Notes"
                            on_press:
                                root.ids.nav_drawer.set_state("close")
                                app.checkPASS()
                            IconLeftWidget:
                                icon: 'image_files\\notess.png'
                                user_font_size : '12sp'
                                pos_hint: {'center_x': 1, 'center_y':.54}


                        OneLineIconListItem:

                            text: 'Settings'
                            on_release:

                                root.ids.nav_drawer.set_state("close")
                                root.ids.screen_manager.current = "settings"

                            IconLeftWidget:

                                icon: 'image_files\\Settings.ico'
                                user_font_size : '15sp'
                                pos_hint: {'center_x': 1, 'center_y':.54}

                        